<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <meta charset="UTF-8" />
    <title>Demo isocrone</title>
	
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity=<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin="" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
		<link rel="stylesheet" href="leaflet.reachability.css" />
		<link rel="stylesheet" href="leaflet-sidepanel.css" />
		<link rel="stylesheet" href="L.Control.Locate.min.css">
		<link rel="stylesheet" href="leaflet-control-geocoder.Geocoder.css">
		<link rel="stylesheet" href="leaflet-panel-layers.css" />
    
	<style>
      html,
      body {
        padding: 0;
        margin: 0;
        height: 100%;
      }

      .mapFullScreen {
        position: absolute;
        width: 100%;
        height: 100%;
      }

      /* Make the icons larger in the user interface */
      .reachability-control-settings-button {
        font-size: 22px;
      }

      .header h1 {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .header a {
        font-size: 16px;
        color: #199900;
        text-decoration: none;
        margin-left: 24px;
      }

      .header a:hover {
        color: #116600;
        text-decoration: underline;
      }

      .header a span {
        margin-left: 4px;
      }

      .header a svg {
        vertical-align: middle;
      }

      .sidepanel-content {
        font-size: 1rem;
      }

      .sidepanel-content h4 {
        margin-top: 0;
        margin-bottom: 0;
      }

      .sidepanel-content a {
        text-decoration: none;
        font-size: 1rem;
        color: #199900;
        transition: color 0.3s ease-in;
      }

      .sidepanel-content a:hover {
        color: #116600;
        text-decoration: underline;
      }
    </style>
  </head>
  <body>

		<script src="leaflet.js"></script>
		<script src="https://unpkg.com/jquery@3.4.1/dist/jquery.js"></script>
		<script src="leaflet.reachability.js"></script>
		<script src="leaflet-sidepanel.min.js"></script>
		<script src="L.Control.Locate.min.js"></script>
		<script src="leaflet-control-geocoder.Geocoder.js"></script>
		<script src="leaflet-panel-layers.js"></script>
		<script src="leaflet-sidepanel.min.js"></script>
		<script src="https://unpkg.com/jquery@3.4.1/dist/jquery.js"></script>
		
	<div id="map" class="mapFullScreen"></div>	
    <div id="mySidepanelLeft" class="sidepanel" aria-label="side panel" aria-hidden="false">
      <div class="sidepanel-inner-wrapper">
        <nav class="sidepanel-tabs-wrapper" aria-label="sidepanel tab navigation">
          <ul class="sidepanel-tabs">
            <li class="sidepanel-tab">
              <a href="#" class="sidebar-tab-link" role="tab" data-tab-link="tab-1">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
                </svg>
              </a>
            </li>
            <li class="sidepanel-tab">
              <a href="#" class="sidebar-tab-link" role="tab" data-tab-link="tab-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-geo" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.813.395.751.25 1.82.414 3.024.414s2.273-.163 3.024-.414c.378-.126.648-.265.813-.395a.619.619 0 0 0 .146-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z" />
                </svg>
              </a>
            </li>
            <li class="sidepanel-tab">
              <a href="#" class="sidebar-tab-link" role="tab" data-tab-link="tab-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-geo-alt" viewBox="0 0 16 16">
                  <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z" />
                  <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                </svg>
              </a>
            </li>
            <li class="sidepanel-tab">
              <a href="#" class="sidebar-tab-link" role="tab" data-tab-link="tab-4">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-bookmarks" viewBox="0 0 16 16">
                  <path d="M2 4a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v11.5a.5.5 0 0 1-.777.416L7 13.101l-4.223 2.815A.5.5 0 0 1 2 15.5V4zm2-1a1 1 0 0 0-1 1v10.566l3.723-2.482a.5.5 0 0 1 .554 0L11 14.566V4a1 1 0 0 0-1-1H4z" />
                  <path d="M4.268 1H12a1 1 0 0 1 1 1v11.768l.223.148A.5.5 0 0 0 14 13.5V2a2 2 0 0 0-2-2H6a2 2 0 0 0-1.732 1z" />
                </svg>
              </a>
            </li>
            <li class="sidepanel-tab">
              <a href="#" class="sidebar-tab-link" role="tab" data-tab-link="tab-5">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                  <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z" />
                  <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z" />
                </svg>
              </a>
            </li>
          </ul>
        </nav>
        <div class="sidepanel-content-wrapper">
          <div class="sidepanel-content">
            <div class="sidepanel-tab-content" data-tab-content="tab-1">
              <h4>Tab 1</h4>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div class="sidepanel-tab-content" data-tab-content="tab-2">
              <h4>Tab 2</h4>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div class="sidepanel-tab-content" data-tab-content="tab-3">
              <h4>Tab 3</h4>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div class="sidepanel-tab-content" data-tab-content="tab-4">
              <h4>Tab 4</h4>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div class="sidepanel-tab-content" data-tab-content="tab-5">
              <h4>Tab 5</h4>
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
          </div>
        </div>
      </div>
      <div class="sidepanel-toggle-container">
        <button class="sidepanel-toggle-button" type="button" aria-label="toggle side panel"></button>
      </div>
    </div>

		<!-- GEOJSON DATA -->
		<script src="data/g.js"></script>
		<script src="data/s.js"></script>
		<script src="data/t.js"></script>

		<script>
			// Create the Leaflet map object
			var map = L.map('map', {
					center: [44.4395, 26.1024],
					zoom: 13,
					minZoom: 12,
					zoomDelta: 0.25,
					zoomSnap: 0,
					maxBounds: L.latLngBounds([
						[44.35, 25.98],
						[44.52, 26.21]
					]).pad(0.5)
				}),
				carto = new L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
					maxZoom: 19
				});

			map.addLayer(carto);

			function style_g() {
				return {
					pane: 'g',
					radius: 4.0,
					opacity: 1,
					color: 'rgba(35,35,35,0.0)',
					dashArray: '',
					lineCap: 'butt',
					lineJoin: 'miter',
					weight: 1,
					fill: true,
					fillOpacity: 1,
					fillColor: 'rgba(1,179,255,1.0)',
					interactive: true,
				}
			}
			map.createPane('g');
			map.getPane('g').style.zIndex = 402;
			map.getPane('g').style['mix-blend-mode'] = 'normal';
			
			function style_s() {
				return {
					pane: 's',
					radius: 4.0,
					opacity: 1,
					color: 'rgba(35,35,35,0.0)',
					dashArray: '',
					lineCap: 'butt',
					lineJoin: 'miter',
					weight: 1,
					fill: true,
					fillOpacity: 1,
					fillColor: 'rgba(110,0,254,1.0)',
					interactive: true,
				}
			}
			map.createPane('s');
			map.getPane('s').style.zIndex = 402;
			map.getPane('s').style['mix-blend-mode'] = 'normal';
			
			function style_t() {
				return {
					pane: 't',
					radius: 4.0,
					opacity: 1,
					color: 'rgba(35,35,35,0.0)',
					dashArray: '',
					lineCap: 'butt',
					lineJoin: 'miter',
					weight: 1,
					fill: true,
					fillOpacity: 1,
					fillColor: 'rgba(115,115,115,1.0)',
					interactive: true,
				}
			}
			map.createPane('t');
			map.getPane('t').style.zIndex = 402;
			map.getPane('t').style['mix-blend-mode'] = 'normal';

			var conf = {
				base: {
					title: ' ',
					layers: [{
							name: "Hartă",
							active: true,
							layer: L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
								attribution: 'OpenStreetMap contributors CartoDB',
								subdomains: 'abcd',
								maxZoom: 19
							})
						},
						{
							name: "Imagine satelitară",
							layer: L.tileLayer('http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}', {
								attribution: 'Google Hybrid',
								subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],
								maxZoom: 19
							})
						}
					]
				},
				tree: {
					title: " ",
					layers: [{
							group: "Școli",
							icon: '<i class="fa fa-circle" style="font-size:9px;color:#6e00fe"></i>',
							collapsed: true,
							layers: [{
									active: false,
									name: "un schimb",
									icon: '<i class="fa fa-circle" style="font-size:9px;color:#6e00fe"></i>',
									layer: L.geoJson(s, {
								pane: 's',
								interactive: true,
								onEachFeature: function(feature, layer) {
									var popupContent =
										'<table>\
											<tr>\
												<td colspan="2"><b>' + (feature.properties.Nume) + '</b></td>\
											</tr>\
											<tr>\
												<td>Nr. schimburi</td><td colspan="2">' + (feature.properties.Nr_schimbu) + '</td>\
											</tr>\
											<tr>\
												<td>Laborator ?</td><td colspan="2">' + (feature.properties.Labor_cab) + '</td>\
											</tr>\
											<tr>\
												<td>Săli de clasă</td><td colspan="2">' + (feature.properties.Salidecls) + '</td>\
											</tr>\
											<tr>\
												<td>Personal calificat</td><td colspan="2">' + (feature.properties.person_cal) + '</td>\
											</tr>\
											<tr>\
												<td>Personal necalificat</td><td colspan="2">' + (feature.properties.pers_neca) + '</td>\
											</tr>\
											<tr>\
												<td>Personal ?</td><td colspan="2">' + (feature.properties.pers_neces) + '</td>\
											</tr>\
											<tr>\
												<td>Săli ?</td><td colspan="2">' + (feature.properties.Nr_Sali_oc) + '</td>\
											</tr>\
										</table>'
									layer.bindPopup(popupContent, {
										maxHeight: 400
									});
								},
								pointToLayer: function(feature, latlng) {
									var context = {
										feature: feature,
										variables: {}
									};
									return L.circleMarker(latlng, style_s(feature));
								},
							})
								},
								{
									active: false,
									name: "două schimburi",
									icon: '<i class="fa fa-circle" style="font-size:9px;color:#6e00fe"></i>',
									layer: L.geoJson(s, {
								pane: 's',
								interactive: true,
								onEachFeature: function(feature, layer) {
									var popupContent =
										'<table>\
											<tr>\
												<td colspan="2"><b>' + (feature.properties.Nume) + '</b></td>\
											</tr>\
											<tr>\
												<td>Nr. schimburi</td><td colspan="2">' + (feature.properties.Nr_schimbu) + '</td>\
											</tr>\
											<tr>\
												<td>Laborator ?</td><td colspan="2">' + (feature.properties.Labor_cab) + '</td>\
											</tr>\
											<tr>\
												<td>Săli de clasă</td><td colspan="2">' + (feature.properties.Salidecls) + '</td>\
											</tr>\
											<tr>\
												<td>Personal calificat</td><td colspan="2">' + (feature.properties.person_cal) + '</td>\
											</tr>\
											<tr>\
												<td>Personal necalificat</td><td colspan="2">' + (feature.properties.pers_neca) + '</td>\
											</tr>\
											<tr>\
												<td>Personal ?</td><td colspan="2">' + (feature.properties.pers_neces) + '</td>\
											</tr>\
											<tr>\
												<td>Săli ?</td><td colspan="2">' + (feature.properties.Nr_Sali_oc) + '</td>\
											</tr>\
										</table>'
									layer.bindPopup(popupContent, {
										maxHeight: 400
									});
								},
								pointToLayer: function(feature, latlng) {
									var context = {
										feature: feature,
										variables: {}
									};
									return L.circleMarker(latlng, style_s(feature));
								},
							})
								},
								{
									active: false,
									name: "trei schimburi",
									icon: '<i class="fa fa-circle" style="font-size:9px;color:#6e00fe"></i>',
									layer: L.geoJson(s, {
								pane: 's',
								interactive: true,
								onEachFeature: function(feature, layer) {
									var popupContent =
										'<table>\
											<tr>\
												<td colspan="2"><b>' + (feature.properties.Nume) + '</b></td>\
											</tr>\
											<tr>\
												<td>Nr. schimburi</td><td colspan="2">' + (feature.properties.Nr_schimbu) + '</td>\
											</tr>\
											<tr>\
												<td>Laborator ?</td><td colspan="2">' + (feature.properties.Labor_cab) + '</td>\
											</tr>\
											<tr>\
												<td>Săli de clasă</td><td colspan="2">' + (feature.properties.Salidecls) + '</td>\
											</tr>\
											<tr>\
												<td>Personal calificat</td><td colspan="2">' + (feature.properties.person_cal) + '</td>\
											</tr>\
											<tr>\
												<td>Personal necalificat</td><td colspan="2">' + (feature.properties.pers_neca) + '</td>\
											</tr>\
											<tr>\
												<td>Personal ?</td><td colspan="2">' + (feature.properties.pers_neces) + '</td>\
											</tr>\
											<tr>\
												<td>Săli ?</td><td colspan="2">' + (feature.properties.Nr_Sali_oc) + '</td>\
											</tr>\
										</table>'
									layer.bindPopup(popupContent, {
										maxHeight: 400
									});
								},
								pointToLayer: function(feature, latlng) {
									var context = {
										feature: feature,
										variables: {}
									};
									return L.circleMarker(latlng, style_s(feature));
								},
							})
								}
							]
						},
						{
							active: true,
							name: "Grădinițe",
							icon: '<i class="fa fa-circle" style="font-size:9px;color:#01b3ff"></i>',
							layer: L.geoJson(g, {
								pane: 'g',
								interactive: true,
								onEachFeature: function(feature, layer) {
									var popupContent =
										'<table>\
											<tr>\
												<td colspan="2"><b>' + (feature.properties.Nume) + '</b></td>\
											</tr>\
											<tr>\
												<td>Nr. schimburi</td><td colspan="2">' + (feature.properties.Nr_schimbu) + '</td>\
											</tr>\
											<tr>\
												<td>Laborator ?</td><td colspan="2">' + (feature.properties.Labor_cab) + '</td>\
											</tr>\
											<tr>\
												<td>Săli de clasă</td><td colspan="2">' + (feature.properties.Salidecls) + '</td>\
											</tr>\
											<tr>\
												<td>Personal calificat</td><td colspan="2">' + (feature.properties.person_cal) + '</td>\
											</tr>\
											<tr>\
												<td>Personal necalificat</td><td colspan="2">' + (feature.properties.pers_neca) + '</td>\
											</tr>\
											<tr>\
												<td>Personal ?</td><td colspan="2">' + (feature.properties.pers_neces) + '</td>\
											</tr>\
											<tr>\
												<td>Săli ?</td><td colspan="2">' + (feature.properties.Nr_Sali_oc) + '</td>\
											</tr>\
										</table>'
									layer.bindPopup(popupContent, {
										maxHeight: 400
									});
								},
								pointToLayer: function(feature, latlng) {
									var context = {
										feature: feature,
										variables: {}
									};
									return L.circleMarker(latlng, style_g(feature));
								},
							})
						},
						{
							active: true,
							name: "Circumscripții școlare",
							icon: '<i class="fa fa-square" style="font-size:10px;color:#ed90f9;"></i>',
							layer: (() => {
								var l = L.geoJson();
								$.getJSON('data/c.json', j => {
									l.addData(j);
								});
								return l;
							})()
						},
						{
							active: false,
							name: "Tranport în comun",
							icon: '<i class="fa fa-circle" style="font-size:10px;color:#737373"></i>',
							layer: L.geoJson(t, {
								pane: 't',
								interactive: true,
								onEachFeature: function(feature, layer) {
									var popupContent =
										'<table>\
											<tr>\
												<td colspan="2"><b>' + (feature.properties.Nume) + '</b></td>\
											</tr>\
										</table>'
									layer.bindPopup(popupContent, {
										maxHeight: 400
									});
								},
								pointToLayer: function(feature, latlng) {
									var context = {
										feature: feature,
										variables: {}
									};
									return L.circleMarker(latlng, style_t(feature));
								},
							})
						}
					]
				}
			};

			var base1 = L.control.panelLayers(conf.base.layers, null, {
				position: 'topright',
				compact: true
			}).addTo(map);

			var over1 = L.control.panelLayers(null, conf.tree.layers, {
				position: 'topright',
				compact: true,
				//collapsed: true,
				selectorGroup: true,
				collapsibleGroups: true
			}).addTo(map);

			L.control.locate({
				locateOptions: {
					maxZoom: 19
				}
			}).addTo(map);

			// Add the reachability plugin
			var reachabilityControl = L.control.reachability({
				// add settings here
				apiKey: '5b3ce3597851110001cf6248c9f85cae50384963b985be5b9d179444', // PLEASE REGISTER WITH OPENROUTESERVICE FOR YOUR OWN KEY!
				styleFn: styleIsolines,
				mouseOverFn: highlightIsolines,
				mouseOutFn: resetIsolines,
				clickFn: clickIsolines,
				markerFn: isolinesOrigin,
				expandButtonContent: '',
				expandButtonStyleClass: 'reachability-control-expand-button fa fa-bullseye',
				collapseButtonContent: '',
				collapseButtonStyleClass: 'reachability-control-collapse-button fa fa-caret-up',
				drawButtonContent: '',
				drawButtonStyleClass: 'fa fa-pencil',
				deleteButtonContent: '',
				deleteButtonStyleClass: 'fa fa-trash',
				distanceButtonContent: '',
				distanceButtonStyleClass: 'fa fa-road',
				timeButtonContent: '',
				timeButtonStyleClass: 'fa fa-clock-o',
				travelModeButton1Content: '',
				travelModeButton1StyleClass: 'fa fa-car',
				travelModeButton2Content: '',
				travelModeButton2StyleClass: 'fa fa-bicycle',
				travelModeButton3Content: '',
				travelModeButton3StyleClass: 'fa fa-male',
				travelModeButton4Content: '',
				travelModeButton4StyleClass: 'fa fa-wheelchair-alt',
			}).addTo(map);

			var osmGeocoder = new L.Control.Geocoder({
				collapsed: true,
				position: 'topleft',
				text: 'Caută o adresă',
				title: 'Test'
			}).addTo(map);
			document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
				.className += ' fa fa-search';
			document.getElementsByClassName('leaflet-control-geocoder-icon')[0]
				.title += 'Caută o adresă';

			const sidepanelLeft = L.control.sidepanel('mySidepanelLeft', {
				panelPosition: 'left',
				tabsPosition: 'top',
				pushControls: true,
				darkMode: false,
				startTab: 5
			}).addTo(map);

			map.attributionControl.setPrefix(false);
			map.attributionControl.addAttribution('ADIZMB, Leaflet');

			// Setup error handlers in case there is a problem when calling the API
			map.on('reachability:error', function() {
				alert('Din păcate solicitarea dumneavoastră nu poate fi soluționată. \n Numărul maxim de interogări a fost atins.');
			});

			map.on('reachability:no_data', function() {
				alert('Vă rugăm să reveniți mâine.\n Vă mulțumim pentru înțelegere.');
			});

			// Function to style the isoline polygons when they are returned from the API call
			function styleIsolines(feature) {
				// NOTE: You can do some conditional styling by reading the properties of the feature parameter passed to the function
				return {
					color: '#635b00',
					opacity: 0.9,
					fillOpacity: 0.2,
					weight: 0.7,
				};
			}

			// Function to style the isoline polygons when the user hovers over them
			function highlightIsolines(e) {
				// NOTE: as shown in the examples on the Leaflet website, e.target = the layer the user is interacting with
				var layer = e.target;

				layer.setStyle({
					fillColor: '#ffea00',
					weight: 1,
					fillOpacity: '0.3',
					opacity: '1'
				});
			}

			// Function to reset the style of the isoline polygons when the user stops hovering over them
			function resetIsolines(e) {
				// NOTE: as shown in the examples on the Leaflet website, e.target = the layer the user is interacting with
				var layer = e.target;

				reachabilityControl.isolinesGroup.resetStyle(layer);
			}

			// Function to display information about an isoline in a popup when the user clicks on it
			function clickIsolines(e) {
				// NOTE: as shown in the examples on the Leaflet website, e.target = the layer the user is interacting with
				var layer = e.target;
				var props = layer.feature.properties;
				let depl = props['Travel mode'];
				let depl_rsp = "";

				if (depl == "driving-car") {
					depl_rsp = "auto";
				} else {
					if (depl == "cycling-regular") {
						depl_rsp = "bicicletă";
					} else {
						if (depl == "foot-walking") {
							depl_rsp = "pedestru";
						} else {
							if (depl == "wheelchair") {
								depl_rsp = "scaun cu rotile";
							};
						};
					};
				};

				var popupContent = 'Modalitate deplasare: ' + depl_rsp + '<br />Interval: 0 - ' + props['Range'] + ' ' + props['Range units'] + '<br />Arie: ' + props['Area'] + ' ' + props['Area units'] + '<br />Populație: ' + props['Population'];
				if (props.hasOwnProperty('Reach factor')) popupContent += '<br />Accesibilitate: ' + props['Reach factor'];
				layer.bindPopup(popupContent).openPopup();
			}

			// Function to create a custom marker at the origin of the isoline groups
			function isolinesOrigin(latLng, travelMode, rangeType) {
				return L.circleMarker(latLng, {
					radius: 3,
					weight: 2,
					color: "#136AEC",
					fillColor: "#136AEC",
					fillOpacity: .15
				});
			}
        </script>
    </body>
</html>
